## Kick start Template

#version=RHEL9
install
cdrom
lang en_AU.UTF-8
keyboard us
timezone Australia/Sydney --isUtc
network --bootproto=dhcp --device=eth0 --activate
rootpw --iscrypted <ENCRYPTED_PASSWORD>
authselect select sssd --force
selinux --enforcing
firewall --enabled --service=ssh

# System registration
%include /tmp/ks-org-redhat-register.ks

# Disk Partitioning
ignoredisk --only-use=sda
autopart --nohome --nolvm
clearpart --all --initlabel
part /boot --fstype xfs --size=1024
part / --fstype xfs --size=10240
part /home --fstype xfs --size=2048
part /tmp --fstype xfs --size=2048
part /var --fstype xfs --size=4096
part /var/log --fstype xfs --size=2048
part /var/log/audit --fstype xfs --size=1024
part /var/tmp --fstype xfs --size=1024
part /usr --fstype xfs --size=4096

# Package installation
%packages
@core
chrony
rsync
sysstat
rsyslog
katello-agent
sos
lsof
traceroute
wget
insights-client
vim-enhanced
zip
unzip
%end

# Services
%post --log=/root/ks-post.log
systemctl enable auditd chronyd crond kdump oddjobd dbus rsyslog sshd tuned goferd
systemctl disable graphical.target
%end

# Enable tuned profile
%post
tuned-adm profile virtual-guest
%end

# Ansible Trigger via Satellite
